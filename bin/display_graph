import logging
import hydra
from cbo.utils_functions.utils import register_resolvers
from omegaconf import OmegaConf
from hydra.utils import instantiate


@hydra.main(config_path="config", config_name="display_graph")
def display_graph(config):
    """
    Load and display the graph described in the configuration
    :param config: the hydra configuration
    """

    # Log the hydra configuration
    logging.info("Graph config:\n{}".format(OmegaConf.to_yaml(config)))

    # Instantiate the graph described in the configuration
    graph = instantiate(config.graph.graph)

    # Display the loaded graph
    graph.save_drawing(config.save_file, show=config.show)


if __name__ == "__main__":
    """
    Loading and displaying the graph described in the configuration.
    """
    register_resolvers()
    display_graph()
